<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Iterated Dynamics: Style</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Iterated Dynamics<span id="projectnumber">&#160;1.3.2.0</span>
   </div>
   <div id="projectbrief">A fractal generator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Style</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
Contents</h1>
<ul>
<li>Design Principles<ul>
<li>SOLID</li>
<li>DRY</li>
</ul>
</li>
<li>C++ Standard</li>
<li>The Standard Library</li>
<li>Third Party Libraries</li>
<li>Names<ul>
<li>Types</li>
<li>Macros</li>
<li>Constants</li>
<li>Enumerations</li>
<li>Functions and Methods</li>
<li>Variables<ul>
<li>Member Variables</li>
<li>Static Variables</li>
<li>Global Variables</li>
</ul>
</li>
<li>Namespaces</li>
<li>Test Cases</li>
<li>Files<ul>
<li>Plain Functions</li>
<li>Classes</li>
</ul>
</li>
</ul>
</li>
<li>A Few Words About Enumerations</li>
<li>Formatting</li>
<li>Braces</li>
<li>Header Guards</li>
<li>License Comment</li>
<li>Additional Guidelines</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Design Principles</h1>
<p>The source code of FRACTINT, the ancestor of Iterated Dynamics (Id), evolved under the many constraints of early MS-DOS programs: limited memory, limited hardware acceleration and limited disk space. Many clever tricks were used in order to squeeze as much code into as little space as possible, resulting in a certain amount of tangling up of the source code. Every effort has been made with Iterated Dynamics to untangle these tricks and make the code more straightforward.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
SOLID</h2>
<p>For new code, Id follows the <a href="https://en.wikipedia.org/wiki/SOLID">SOLID</a> design principles. While most of the code in Id is still procedural in nature and the SOLID design principles come from the experiences of object-oriented programming, the principles apply to any style of programming. The <a href="https://en.wikipedia.org/wiki/Single-responsibility_principle">Single Responsibility Principle (SRP)</a> is the most important.</p>
<p>Simply put, the idea behind SRP is that any unit of code should do one thing only. Variables should be used for only one purpose. Functions should do only one thing. Files should contain data and functions that achieve a single goal. Types (structs, classes, etc.) should only do one thing.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
DRY</h2>
<p>Another important design principle is <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY (Don't Repeat Yourself)</a>. Duplication of code represents a point of future divergence and a source of bugs. When duplicated code diverges, it becomes difficult to see the differences. When adding code to Id, the best way to avoid duplication is to familiarize yourself with the existing code and use existing mechanisms instead of duplicating them.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
C++ Standard</h1>
<p>Id uses the <a href="https://en.cppreference.com/w/cpp/17">C++17</a> language standard. This provides access to the <a href="https://en.cppreference.com/w/cpp/filesystem"><code>&lt;filesystem&gt;</code></a> library and the <a href="https://en.cppreference.com/w/cpp/header/any"><code>&lt;any&gt;</code></a>, <a href="https://en.cppreference.com/w/cpp/header/optional"><code>&lt;optional&gt;</code></a>, <a href="https://en.cppreference.com/w/cpp/header/string_view"><code>&lt;string_view&gt;</code></a>, and <a href="https://en.cppreference.com/w/cpp/header/variant"><code>&lt;variant&gt;</code></a> headers. Any valid C++17 code is permitted.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
The Standard Library</h1>
<p>For C standard library headers, e.g. <code>&lt;stdio.h&gt;</code>, use the C++ form that declares all identifiers in namespace <code>std</code>, e.g. <code>&lt;cstdio&gt;</code>.</p>
<p>Reference all data and functions from the C or C++ standard library with an explicit <code>std::</code> namespace qualifier or with the appropriate namespace alias. For instance, the namespace alias <code>fs</code> is often used for the <code>std::filesystem</code> namespace.</p>
<p>For math functions, prefer the plain C++ functions that are overloaded by type rather than the type suffixed functions from C. For instance, use <code>std::sin(float arg)</code> instead of <code>std::sinf(float arg)</code>.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Third Party Libraries</h1>
<p>Id uses <a href="https://vcpkg.io">vcpkg</a> for consuming third-party dependencies. Packages must be supported on Windows and linux to preserve cross-platform compatibility.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Names</h1>
<p>There are two hard problems in computer science:</p>
<ul>
<li>Cache coherency</li>
<li>Naming things</li>
<li>Off by one errors <code>:)</code></li>
</ul>
<p>Iterated Dynamics uses the following naming conventions. Every attempt has been made to refactor the code to follow these conventions, but there may still be isolated instances where some things (most likely local variables) are not yet following these conventions. Pull requests that correct any deviations are appreciated! Please use isolated commits for adjustments to conform to style conventions and keep functional changes in separate commits.</p>
<p>In the C++ and C standards, certain names are reserved for use by the standard or the implementation and are to be avoided. The details can be found on the <a href="https://en.cppreference.com/w/cpp/language/identifiers">identifiers page</a> of <a href="https://cppreference.com">cppreference.com</a>, but generally speaking avoid using names that begin with underscore (<code>_</code>) or any name containing two consecutive underscores (<code>__</code>).</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Types</h2>
<p>Use <code>UpperCamelCase</code> for the names of types, such as <code>enum</code>, <code>struct</code>, <code>class</code> and <code>union</code> types. Template arguments that represent types also follow this convention.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Macros</h2>
<p>There are very few reasons to use macros anymore. In almost every case there are better mechanisms available to the C++ programmer. In the few cases where a macro is the only thing that can do the job, use <code>ALL_UPPER</code> names for macros.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Constants</h2>
<p>Constants use <code>ALL_UPPER</code> names and are best declared as <a href="https://en.cppreference.com/w/cpp/language/constexpr"><code>constexpr</code></a>, which can be safely used in header files without violating the <a href="https://en.cppreference.com/w/cpp/language/definition">one definition rule</a>. For groups of related constants, consider using an <code>enum class</code>.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Enumerations</h2>
<p>Individual enumeration values use <code>ALL_UPPER</code> names, identical to the names of constants.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Functions and Methods</h2>
<p>The names of functions and methods use <code>all_lower_case</code> with underscores separating words in compound names.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Variables</h2>
<p>The names of variables use <code>all_lower_case</code> with underscores separating words in compound names.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Member Variables</h3>
<p>The names of member variables additionally use an <code>m_</code> prefix.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
Static Variables</h3>
<p>Variables of <code>static</code> scope (e.g. variables declared <code>static</code> at file scope) additionally use an <code>s_</code> prefix.</p>
<p>Adding new static variables should be avoided. Static variables are just another form of global variable and hinder the evolution towards multi-threading. Iterated Dynamics has too much global data already <code>:)</code>.</p>
<h3><a class="anchor" id="autotoc_md16"></a>
Global Variables</h3>
<p>Global variables declared <code>extern</code> in a header file and defined in a source file additionally use a <code>g_</code> prefix.</p>
<p>Adding new global variables should be avoided. Global variables hinder the evolution towards multi-threading. Iterated Dynamics has too much global data already <code>:)</code>.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Namespaces</h2>
<p>Namespaces and namespace aliases use <code>all_lower_case</code> names. Currently most Id code lies in the global namespace. Over time all data and code will be moved into the namespace <code>id</code>.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Test Cases</h2>
<p>Id uses <a href="https://google.github.io/googletest/">Google Test</a> for unit tests. Google Test prohibits test fixture names and test case names from containing an underscore (see the <a href="https://google.github.io/googletest/reference/testing.html#TEST">TEST and TEST_F reference</a>). Use <code>UpperCamelCase</code> for the names of test suites and fixtures and <code>lowerCamelCase</code> for the names of test cases.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Files</h2>
<p>In general, files are named according to the main item inside the file. When developing on Windows, take care that you use the proper case of filename when modifying a CMake script or source file. For instance, be sure to include <code><a class="el" href="Driver_8h_source.html">Driver.h</a></code> and not <code>driver.h</code>, even though the latter will compile on Windows where the default file system is case insensitive aroun file names. Mismatched case on files will fail the Linux builds.</p>
<h3><a class="anchor" id="autotoc_md20"></a>
Plain Functions</h3>
<p>Files declaring and defining plain functions are named according to the main function for the file. For example, the function <code>decoder</code> is declared in a file named <code><a class="el" href="decoder_8h_source.html">decoder.h</a></code> and implemented in a file named <code><a class="el" href="decoder_8cpp_source.html">decoder.cpp</a></code>.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Classes</h3>
<p>Files declaring and defining classes are named according to the class. For example, the help compiler class <code>Compiler</code> is declared in <code><a class="el" href="Compiler_8h_source.html">Compiler.h</a></code> and implemented in <code><a class="el" href="Compiler_8cpp_source.html">Compiler.cpp</a></code>.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
A Few Words About Enumerations</h1>
<p>Prefer scoped enumerations, declared with <code>enum class</code>, over plain enumerations declared with <code>enum</code>. Sometimes it can be convenient to treat a scoped enumeration value as an integer. Plain enums are always implicitly convertible to an integer, but scoped enumerations must be explicitly cast to an integer. To cut down on the noise, when a scoped enumeration is often used as an integer, e.g. as an index into an array, declare a prefix <code>operator+</code> for the enumeration type and use the expression <code>+EnumType::ENUM_VALUE</code> when the integer value is desired.</p>
<p>Sometimes an enumeration type is used to represent a set of composable flags, with the eumeration values assigned to powers of two. In this scenario, declare appropriate <code>operator|</code>, <code>operator&amp;</code> and <code>operator~</code> inline functions to support combination of enumeration values. In such cases, the name of the enumeration type typically ends with the word <code>Flags</code>. It can be convenient to define an inline function <code>bit_set</code> that takes two such flags values and checks that the bits defined by the second argument are set in the first argument:</p>
<div class="fragment"><div class="line">inline FooFlags bit_set(FooFlags lhs, FooFlags rhs)</div>
<div class="line">{</div>
<div class="line">    return (lhs &amp; rhs) == rhs;</div>
<div class="line">}</div>
<div class="line">// example usage:</div>
<div class="line">//     if (bit_set(flags, FooFlags::VALUE))</div>
<div class="line">//     { ... }</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md23"></a>
Formatting</h1>
<p>All new code should be formatted with <code>clang-format</code> before submitting a pull request. Visual Studio supports using formatting with clang-format directly, but it can als be installed separately and invoked directly on a source file from the command-line. The <code>.clang-format</code> file at the top of the repository configures the appropriate settings for clang-format.</p>
<p>Sometimes long expressions, such as a sum of polynomial terms, or very long argument lists yield less than desirable formatting. One way to get the desired formatting is to break up long expressions or long lists with empty single-line comments (<code>//</code>) to get line breaks at the desired locations.</p>
<p>In rare cases, usually when defining large tables of data, formatting can be turned off and on with the comments:</p>
<div class="fragment"><div class="line">// clang-format off</div>
<div class="line">// clang-format on</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md24"></a>
Braces</h1>
<p>All control statements (<code>do</code>, <code>if</code>, <code>while</code>, <code>for</code>, etc.) should have braces around the nested statements. This is done even if the nested statement is empty or a single statement. For example:</p>
<div class="fragment"><div class="line">char *text{get_something()};</div>
<div class="line">char *end;</div>
<div class="line">for (end = text; *end; ++end)</div>
<div class="line">{</div>
<div class="line">}</div>
</div><!-- fragment --><p>Formatting with clang-format will properly handle the indentation of the nested statements and the formatting of brace position and brace indentation. However, clang-format won't automatically add the braces if they are omitted.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
Header Guards</h1>
<p>Use <code>#pragma once</code> for header guards on all include files.</p>
<h1><a class="anchor" id="autotoc_md26"></a>
License Comment</h1>
<p>Iterated Dynamics is licensed under the GNU General Public License v. 3. All files should include a license comment &ndash; using whatever commenting convention is appropriate for the file &ndash; designating the license's SPDX identifier. For example, for C++ source files:</p>
<div class="fragment"><div class="line">// SPDX-License-Identifier: GPL-3.0-only</div>
<div class="line">//</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md27"></a>
Additional Guidelines</h1>
<p>The C++ community collaborates on the <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">C++ Core Guidelines</a> for C++ programmers. Most of these guidelines apply to the code in Id and are considered good advice, but there is no strict requirement to follow each and every guideline listed there. The main authors of Id recommend skimming through the guidelines and pausing to read any individual guideline that seems interesting to you. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
